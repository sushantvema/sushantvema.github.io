---
title: "Using Python Enums for Categories of Information Extracted by an LLM as a JSON"
description: "This document discusess best practices in extractive summarization tasks for LLMs - how best to organize a data schema."
author: "Sushant Vema"
date_created: "2024-07-09T14:14:35"
date: "2024-07-09T14:14:39"
tags:
  - "technical" 
  - "AI-generated-source-text"
aliases: 
  - "enum"
  - "schema"
  - "extractive summarization"
---

# My analysis:


# Content generated by Claude 3.5 Sonnet:
> Query: I'm creating these Enums in order to design a JSON schema for LLM model outputs for an extractive summarization task. Do you think this is the best way to organize the categorical values (as in, as separate Enums), or is there an intelligent way to combine everything into one large Enum? \n\n Additionally, are there any other types of information categories that I ought to add to the JSON schema? I know there has to be something similar to "confidence" or "reasoning" for each field, as well as a default value to select when the model isn't certain.

> [!NOTE]
> Context: for my job, I was trying to create a JSON output schema for an extractive summarization application. I provided a screenshot of business requirements (categories and sub-categories of information to retrieve using the system) as well as a short example of some Enums I already wrote in Python. It was able to extrapolate from the example and converted the very long list of business requirements into the Enum format I specified with the small example. I am now following up about best practices as well as a few more requirements to integrate and the model gave me a valid new format as shown below.

Your approach of using separate Enums for different categories is generally a good practice, as it provides clear organization and makes the code more maintainable. However, for a JSON schema in an extractive summarization task, there might be more efficient ways to structure the data. Let's consider the options:

Separate Enums (current approach):
- Pros: Clear organization, type safety in Python
- Cons: Might be overly complex for a JSON schema, especially if the LLM doesn't need to work with Python objects directly

Single large Enum:
- Pros: All categories in one place
- Cons: Can become unwieldy, harder to maintain, and might not represent the hierarchical nature of the data well

Nested dictionary structure:
- This might be the most suitable for a JSON schema. It allows for a hierarchical representation that closely mirrors the structure of JSON.

Here's an example of how you might structure this as a nested dictionary for a JSON schema:
```python
schema = {
    "type": "object",
    "properties": {
        "personal_info": {
            "type": "object",
            "properties": {
                "gender_identity": {
                    "type": "string",
                    "enum": ["Male", "Female", "Non-Binary"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                "pronouns": {
                    "type": "string",
                    "enum": ["She/Her/Hers", "He/Him", "They/Them", "Other"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                # ... other personal info categories
            }
        },
        "life_events": {
            "type": "object",
            "properties": {
                "marital_status": {
                    "type": "string",
                    "enum": ["Single", "Married", "Prefer Not To Answer"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                "life_moments": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": ["Engaged", "Just Married", "New Home", "New Baby", "New Job", "Just Graduated"]
                    },
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                },
                # ... other life event categories
            }
        },
        # ... other main categories
    }
}
```
This structure allows for:
- Hierarchical organization of data
- Inclusion of confidence scores and reasoning for each field
- Default values for uncertain cases
Easy extension for additional categories

Additional categories you might consider adding:
- Demographic information (age range, location, education level)
- Professional information (industry, job title, years of experience)
- Social media presence (platforms used, frequency of use)
- Financial status (income range, homeownership)
- Health and wellness (exercise habits, medical conditions)
- Travel preferences (frequent traveler, preferred destinations)
- Technology usage (devices owned, tech-savviness)
- Political leanings (if appropriate for your use case)
- Language proficiency
- Cultural background

Remember to include for each category:
- Confidence score (0-1)
- Reasoning (string explaining the model's decision)
- Default value for uncertain cases

This structure provides a flexible, extensible schema that can accommodate various types of information while allowing for uncertainty and explanations in the model's output.

> This schema looks great. Go ahead extrapolate this out to the result of the fields we talked about previously. I'll take your recommendations about "additional categories I might consider adding" into account for a later version of the schema. For now, refer to the original set of business requirements we discussed.

Certainly. I'll create an expanded JSON schema based on the categories we initially discussed, incorporating the confidence, reasoning, and default values for each field. Here's the extended schema:

```python
schema = {
    "type": "object",
    "properties": {
        "personal_info": {
            "type": "object",
            "properties": {
                "gender_identity": {
                    "type": "string",
                    "enum": ["Male", "Female", "Non-Binary"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                "pronouns": {
                    "type": "string",
                    "enum": ["She/Her/Hers", "He/Him", "They/Them", "Other"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                "lgbtqia_plus": {
                    "type": "boolean",
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": null
                }
            }
        },
        "life_events": {
            "type": "object",
            "properties": {
                "life_moments": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": ["Engaged", "Just Married", "New Home", "New Baby", "New Job", "Just Graduated"]
                    },
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                },
                "marital_status": {
                    "type": "string",
                    "enum": ["Single", "Married", "Prefer Not To Answer"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                }
            }
        },
        "family": {
            "type": "object",
            "properties": {
                "has_children": {
                    "type": "boolean",
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": null
                },
                "ages_of_children": {
                    "type": "array",
                    "items": {"type": "number"},
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                }
            }
        },
        "lifestyle": {
            "type": "object",
            "properties": {
                "dietary_preferences": {
                    "type": "string",
                    "enum": ["Carnivore", "Vegetarian", "Vegan"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Unknown"
                },
                "pets": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": ["Cat", "Dog", "Reptile/Amphibians", "Birds", "Small mammal (other pets)", "Rat", "Aquatic animals", "Farm Animals/Livestock"]
                    },
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                }
            }
        },
        "interests": {
            "type": "object",
            "properties": {
                "hobbies": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": ["Art", "Baking/Cooking", "Games", "Books/Reading", "Music/DJ/Instruments", "Fishing", "Camping", "Fitness"]
                    },
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                },
                "sports": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": ["Basketball", "Football", "Tennis", "Soccer", "Water Sports", "Mountain Sports", "Pickleball", "Baseball/Softball"]
                    },
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"}
                },
                "athlete_status": {
                    "type": "string",
                    "enum": ["Professional Athlete", "College Athlete", "Not an Athlete"],
                    "confidence": {"type": "number", "minimum": 0, "maximum": 1},
                    "reasoning": {"type": "string"},
                    "default": "Not an Athlete"
                }
            }
        }
    }
}
```
This schema incorporates all the categories from our original discussion, structured in a way that should work well for a JSON output from an LLM in an extractive summarization task. Key points:
- Each main category (personal_info, life_events, family, lifestyle, interests) is an object containing relevant fields.
- Fields that can have multiple values (like pets, hobbies, sports) are represented as arrays.
- Each field includes a confidence score, reasoning, and a default value where appropriate.
- The LGBTQIA+ field is represented as a boolean, as specific values weren't provided in the original image.
- The "ages_of_children" field is an array of numbers, assuming multiple children could be present.
- An "athlete_status" field was added to capture the "Professional Athlete" and "College Athlete" options from the original list.

This schema allows for detailed and structured output from the LLM, including its confidence and reasoning for each piece of information extracted. It also provides flexibility for cases where information might be uncertain or not applicable.
